<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JS Action Capstone: Quiz App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for feedback animations */
        @keyframes shake {

            0%,
            100% {
                transform: translateX(0);
            }

            25% {
                transform: translateX(-5px);
            }

            75% {
                transform: translateX(5px);
            }
        }

        .shake {
            animation: shake 0.3s ease-in-out;
        }

        @keyframes pop {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .pop {
            animation: pop 0.2s ease-out;
        }

        /* Custom Scrollbar for code blocks if needed */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
    </style>
</head>

<body class="bg-gray-100 text-gray-800 font-sans transition-colors duration-300 flex flex-col min-h-screen">

    <!-- Navbar / Header -->
    <header class="bg-white shadow-md p-4 transition-colors duration-300 dark:bg-gray-800 dark:text-white">
        <div class="max-w-2xl mx-auto flex justify-between items-center">
            <h1 class="text-xl font-bold flex items-center gap-2">
                <span>‚ö°</span> JS Action Quiz
            </h1>
            <button id="theme-toggle" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition">
                üåô
            </button>
        </div>
    </header>

    <!-- Main Container -->
    <main class="flex-grow flex items-center justify-center p-4">
        <div
            class="w-full max-w-2xl bg-white rounded-xl shadow-xl overflow-hidden transition-colors duration-300 dark:bg-gray-800 dark:text-white min-h-[400px] flex flex-col relative">

            <!-- Progress Bar (Hidden initially) -->
            <div id="progress-container" class="w-full bg-gray-200 h-2 hidden dark:bg-gray-700">
                <div id="progress-bar" class="bg-blue-500 h-2 w-0 transition-all duration-300"></div>
            </div>

            <!-- Screen 1: Start Screen -->
            <div id="start-screen"
                class="flex-grow flex flex-col items-center justify-center p-8 text-center space-y-6">
                <div class="text-6xl mb-2">üöÄ</div>
                <h2 class="text-3xl font-bold">Ready to test your skills?</h2>
                <p class="text-gray-500 dark:text-gray-400 max-w-md">
                    This quiz covers everything from variables to DOM manipulation.
                    You have 5 questions. Good luck!
                </p>
                <button id="start-btn"
                    class="px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-lg transform transition hover:scale-105 active:scale-95">
                    Start Quiz
                </button>
            </div>

            <!-- Screen 2: Quiz Interface (Hidden initially) -->
            <div id="quiz-screen" class="hidden flex-grow flex flex-col p-6 md:p-8">
                <div class="flex justify-between items-center mb-6 text-sm font-medium text-gray-400">
                    <span id="question-counter">Question 1 of 5</span>
                    <span id="score-display"
                        class="bg-blue-100 text-blue-800 px-3 py-1 rounded-full dark:bg-blue-900 dark:text-blue-200">Score:
                        0</span>
                </div>

                <div class="flex-grow flex flex-col justify-center">
                    <h3 id="question-text" class="text-2xl font-bold mb-6 leading-tight">
                        <!-- Question goes here -->
                    </h3>
                    <div id="answers-container" class="grid gap-3">
                        <!-- Buttons generated by JS -->
                    </div>
                </div>

                <div id="feedback-area" class="mt-6 h-8 text-center font-bold transition-opacity opacity-0">
                    <!-- Correct/Wrong message -->
                </div>
            </div>

            <!-- Screen 3: Results (Hidden initially) -->
            <div id="result-screen"
                class="hidden flex-grow flex flex-col items-center justify-center p-8 text-center space-y-6">
                <div id="result-emoji" class="text-6xl mb-2">üéâ</div>
                <h2 class="text-3xl font-bold">Quiz Completed!</h2>
                <p class="text-gray-500 dark:text-gray-400">Your final score is:</p>
                <div class="text-5xl font-extrabold text-blue-600 dark:text-blue-400">
                    <span id="final-score">0</span> / <span id="total-questions">0</span>
                </div>
                <p id="result-message" class="text-lg font-medium"></p>
                <button id="restart-btn"
                    class="px-8 py-3 bg-gray-800 hover:bg-gray-900 dark:bg-gray-700 dark:hover:bg-gray-600 text-white font-semibold rounded-lg shadow-lg transform transition hover:scale-105">
                    Play Again
                </button>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="p-4 text-center text-gray-400 text-sm">
        <p>WDJS08 Capstone Project</p>
    </footer>

    <script>
        // --- DATA: Question Bank (Lesson 5: Lists/Arrays) ---
        const questions = [
            {
                question: "Which keyword is used to declare a variable that cannot be reassigned?",
                answers: [
                    { text: "var", correct: false },
                    { text: "let", correct: false },
                    { text: "const", correct: true },
                    { text: "fixed", correct: false }
                ]
            },
            {
                question: "What will `console.log(3 + '3')` output in JavaScript?",
                answers: [
                    { text: "6", correct: false },
                    { text: "33", correct: true },
                    { text: "Error", correct: false },
                    { text: "undefined", correct: false }
                ]
            },
            {
                question: "Which method is used to select an HTML element by its ID?",
                answers: [
                    { text: "document.querySelector()", correct: false },
                    { text: "document.getElementById()", correct: true },
                    { text: "document.selectAll()", correct: false },
                    { text: "window.find()", correct: false }
                ]
            },
            {
                question: "How do you write an IF statement in JavaScript?",
                answers: [
                    { text: "if i == 5 then", correct: false },
                    { text: "if (i == 5)", correct: true },
                    { text: "if i = 5", correct: false },
                    { text: "if i : 5", correct: false }
                ]
            },
            {
                question: "Which event occurs when a user clicks on an HTML element?",
                answers: [
                    { text: "onchange", correct: false },
                    { text: "onmouseover", correct: false },
                    { text: "onclick", correct: true },
                    { text: "onpress", correct: false }
                ]
            }
        ];

        // --- VARIABLES: State Management (Lesson 2) ---
        let currentQuestionIndex = 0;
        let score = 0;
        let isDarkMode = false;

        // --- DOM ELEMENTS (Lesson 6: Connecting to DOM) ---
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');

        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const progressContainer = document.getElementById('progress-container');
        const progressBar = document.getElementById('progress-bar');
        const questionCounter = document.getElementById('question-counter');
        const scoreDisplay = document.getElementById('score-display');
        const feedbackArea = document.getElementById('feedback-area');

        const finalScoreSpan = document.getElementById('final-score');
        const totalQuestionsSpan = document.getElementById('total-questions');
        const resultMessage = document.getElementById('result-message');
        const resultEmoji = document.getElementById('result-emoji');

        // --- FUNCTIONS (Lesson 4: Function Factory) ---

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            scoreDisplay.innerText = `Score: ${score}`;

            // Switch Screens (Lesson 6: Changing Styles/Classes)
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            progressContainer.classList.remove('hidden');

            showQuestion();
        }

        function showQuestion() {
            resetState();
            const currentQuestion = questions[currentQuestionIndex];

            // Update Text
            questionText.innerText = currentQuestion.question;
            questionCounter.innerText = `Question ${currentQuestionIndex + 1} of ${questions.length}`;

            // Update Progress Bar
            const progressPercent = ((currentQuestionIndex) / questions.length) * 100;
            progressBar.style.width = `${progressPercent}%`;

            // Create Buttons (Lesson 5: Loops - forEach)
            currentQuestion.answers.forEach(answer => {
                const button = document.createElement('button');
                button.innerText = answer.text;
                // Styling classes
                button.classList.add(
                    'w-full', 'text-left', 'p-4', 'rounded-lg', 'border-2',
                    'border-gray-200', 'hover:bg-blue-50', 'hover:border-blue-500',
                    'transition-all', 'font-medium', 'dark:border-gray-600',
                    'dark:hover:bg-gray-700', 'dark:hover:border-blue-400'
                );

                // Store correctness in dataset
                if (answer.correct) {
                    button.dataset.correct = answer.correct;
                }

                // Event Listener (Lesson 7: Events)
                button.addEventListener('click', selectAnswer);
                answersContainer.appendChild(button);
            });
        }

        function resetState() {
            feedbackArea.style.opacity = '0';
            feedbackArea.className = "mt-6 h-8 text-center font-bold transition-opacity opacity-0"; // Reset classes
            while (answersContainer.firstChild) {
                answersContainer.removeChild(answersContainer.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedBtn = e.target;
            const isCorrect = selectedBtn.dataset.correct === "true";

            // Logic (Lesson 3: Logic & Decision Making)
            if (isCorrect) {
                score++;
                scoreDisplay.innerText = `Score: ${score}`;
                selectedBtn.classList.add('bg-green-100', 'border-green-500', 'dark:bg-green-900', 'dark:border-green-400');
                showFeedback(true);
            } else {
                selectedBtn.classList.add('bg-red-100', 'border-red-500', 'dark:bg-red-900', 'dark:border-red-400');
                selectedBtn.classList.add('shake'); // Animation
                showFeedback(false);
            }

            // Disable all buttons to prevent multiple clicks
            Array.from(answersContainer.children).forEach(button => {
                button.disabled = true;
                button.classList.remove('hover:bg-blue-50', 'hover:border-blue-500'); // Remove hover effects
                // Highlight the correct answer if wrong was chosen
                if (button.dataset.correct === "true" && !isCorrect) {
                    button.classList.add('bg-green-50', 'border-green-500', 'opacity-70');
                }
            });

            // Wait before next question
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < questions.length) {
                    showQuestion();
                } else {
                    showResults();
                }
            }, 1500);
        }

        function showFeedback(isCorrect) {
            feedbackArea.style.opacity = '1';
            if (isCorrect) {
                feedbackArea.innerText = "Correct! üéâ";
                feedbackArea.classList.add('text-green-600', 'dark:text-green-400', 'pop');
            } else {
                feedbackArea.innerText = "Wrong!";
                feedbackArea.classList.add('text-red-500', 'dark:text-red-400');
            }
        }

        function showResults() {
            quizScreen.classList.add('hidden');
            progressContainer.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            finalScoreSpan.innerText = score;
            totalQuestionsSpan.innerText = questions.length;

            // Dynamic message based on score
            if (score === questions.length) {
                resultMessage.innerText = "Perfect Score! You're a JS Wizard! üßô‚Äç‚ôÇÔ∏è";
                resultEmoji.innerText = "üèÜ";
            } else if (score > questions.length / 2) {
                resultMessage.innerText = "Great job! Keep coding! üíª";
                resultEmoji.innerText = "üòé";
            } else {
                resultMessage.innerText = "Good effort! Review the basics and try again. üìö";
                resultEmoji.innerText = "ü§î";
            }
        }

        // --- THEME TOGGLE (Lesson 6 Feature) ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const body = document.body;

        themeToggleBtn.addEventListener('click', () => {
            isDarkMode = !isDarkMode;
            if (isDarkMode) {
                body.classList.add('dark'); // Tailwind dark mode logic relies on class="dark" usually on html, but here we scope
                document.documentElement.classList.add('dark');
                themeToggleBtn.innerText = '‚òÄÔ∏è';
            } else {
                body.classList.remove('dark');
                document.documentElement.classList.remove('dark');
                themeToggleBtn.innerText = 'üåô';
            }
        });

        // --- INITIALIZATION ---
        document.getElementById('start-btn').addEventListener('click', startQuiz);
        document.getElementById('restart-btn').addEventListener('click', startQuiz);

    </script>
</body>

</html>